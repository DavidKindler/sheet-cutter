(this["webpackJsonpsheet-cutter"]=this["webpackJsonpsheet-cutter"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(1),a=n.n(r),o=n(11),s=n.n(o),l=n(3),c=n(4),u=n(6),d=n(5);function h(e){return function(t){return e(t.target.value)}}var p,f=n(10),g=n(2),b=n.n(g),v=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).state={},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.panel;return Object(i.jsx)("div",{style:{height:5*e.height,width:5*e.width,border:"1px solid black"},children:e.material+"\n"+e.height+"\n"+e.width})}}]),n}(a.a.Component),P=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).state={},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this,t=[].concat(Object(f.a)(this.props.madePanels),Object(f.a)(this.props.inventoryPanels)),n=b.a.groupBy(t,(function(e){return e.originalSource}));return Object(i.jsxs)("div",{children:[this.props.notMadePanels.map((function(e){return Object(i.jsx)(v,{panel:e})})),this.props.startPanels.map((function(t){var r=n[t.id];return 1===r.length?null:Object(i.jsxs)("div",{style:{marginTop:20,pageBreakInside:"avoid",WebkitPrintColorAdjust:"exact"},children:[Object(i.jsxs)("p",{children:[t.label," - ",t.height," x ",t.width]}),Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)("div",{style:{height:5*t.height,width:5*t.width,border:"1px solid black",position:"relative",backgroundColor:"red"},children:r.map((function(t){if(void 0===t.originalSourcePos||t.height<=0||t.width<=0)return null;var n=e.props.inventoryPanels.includes(t),r=n?"":t.id;return Object(i.jsx)("div",{style:{height:5*t.height,width:5*t.width,border:"1px dashed #000",position:"absolute",top:5*t.originalSourcePos.top,left:5*t.originalSourcePos.left,backgroundColor:n?"#ddd":"white",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)("p",{children:r})},t.id)}))}),Object(i.jsx)("div",{style:{marginLeft:10},children:r.map((function(t){return e.props.inventoryPanels.includes(t)?null:Object(i.jsxs)("p",{children:[t.id," - ",t.label," - ",t.height," x"," ",t.width]},t.id)}))})]})]},t.id)}))]})}}]),n}(a.a.Component),j=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).state={},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.job,t=this.props.result;return void 0===e||void 0===t?"job or result undefined...":Object(i.jsx)("div",{children:Object(i.jsx)(P,{startPanels:e.availablePanels,madePanels:t.panelsMade,inventoryPanels:t.panelInventory,notMadePanels:t.panelsNotPlaced})})}}]),n}(a.a.Component),m=n(12);!function(e){e[e.VERTICAL=1]="VERTICAL",e[e.HORIZONTAL=2]="HORIZONTAL"}(p||(p={}));var O=1;function x(e){var t=b.a.cloneDeep(e.availablePanels);t.forEach((function(e){e.originalSource=e.id,e.parentSource=e.id}));var n=b.a.cloneDeep(e.neededPanels);n.sort(A);for(var i=[],r=[],a=[],o=function(){var o=n.shift();if(void 0===o)return console.log("panel was undefined"),"break";var s=t.filter((function(e){return e.material===o.material})).filter((function(t){return function(e,t,n){var i=y(e),r=i.bigDim,a=i.smallDim,o=y(t),s=o.bigDim,l=o.smallDim;return r>=s&&a>=l}(t,o,e.settings)}));if(0===s.length)return i.push(o),console.log("could not place",o),"continue";var l=b.a.maxBy(s,(function(e){return function(e,t){var n=y(e),i=n.bigDim,r=n.smallDim,a=y(t),o=a.bigDim,s=a.smallDim;if(o===i||s===r||o===r||s===i)return 1;return o/i*s/r}(e,o)}));if(void 0===l)return console.error("could not find best"),"break";b.a.remove(t,(function(e){return e.id===l.id}));var c=function(e,t,n){var i=e.height-t.height,r=e.width-t.width,a=i<0||r<0,o=e.height-t.width,s=e.width-t.height,l=o>=0&&s>=0,c=w(t.width,t.height,e,n),u=w(t.height,t.width,e,n);if(a)return u.cuts;if(!l||c.biggestArea>u.biggestArea)return c.cuts;return u.cuts}(l,o,e.settings);if(0===c.length)return r.push(l),"continue";var u=c[0],d=L(l,u,e.settings),h=d.goodPanel,p=d.wastePanel;if(void 0===h)return console.error("failed on a cut?"),"break";h.label=o.label,a.push(u),p&&t.push(p);var f=c[1];if(void 0!==f){var g=L(h,f,e.settings),v=g.goodPanel,P=g.wastePanel;if(void 0===v)return console.warn("panel was undefined?"),"break";r.push(v),P&&t.push(P),a.push(f)}else r.push(h)};n.length;){var s=o();if("break"===s)break}return{panelInventory:t,panelsMade:r,panelsNotPlaced:i,cutsInOrder:a}}function L(e,t,n){var i,r;if(void 0===t)return console.error("cut undefined"),{goodPanel:void 0,wastePanel:void 0};var a=b.a.cloneDeep(e);a.id=O++;var o=b.a.cloneDeep(e);return o.id=O++,o.parentSourcePos={left:0,top:0},o.originalSourcePos=k(e.originalSourcePos,o.parentSourcePos),o.parentSource=e.id,o.originalSource=null!==(i=e.originalSource)&&void 0!==i?i:e.id,t.cutDirection===p.HORIZONTAL?(a.height-=t.cutPosition+n.bladeKerf,a.parentSourcePos={top:t.cutPosition+n.bladeKerf,left:0},o.height=t.cutPosition):(a.width-=t.cutPosition+n.bladeKerf,a.parentSourcePos={top:0,left:t.cutPosition+n.bladeKerf},o.width=t.cutPosition),a.height=Math.max(a.height,0),a.width=Math.max(a.width,0),a.originalSourcePos=k(e.originalSourcePos,a.parentSourcePos),a.parentSource=e.id,a.originalSource=null!==(r=e.originalSource)&&void 0!==r?r:e.id,{goodPanel:o,wastePanel:a}}function k(e,t){return void 0===e&&(e={top:0,left:0}),void 0===t&&(t={top:0,left:0}),{left:e.left+t.left,top:e.top+t.top}}function w(e,t,n,i){var r=n.width-e>.001,a=n.height-t>.001,o=i.bladeKerf,s={cutDirection:p.VERTICAL,cutPosition:e,panelIdToCut:n.id},l={cutDirection:p.HORIZONTAL,cutPosition:t,panelIdToCut:n.id};if(a&&r){var c=Math.max(t*(n.width-e-o),(n.height-t-o)*n.width),u=Math.max(e*(n.height-t-o),(n.width-e-o)*n.height),d=n.width+t,h=n.height+e;return i.optimizeArea?c>u?{cuts:[l,s],biggestArea:c}:{cuts:[s,l],biggestArea:u}:h>d?{cuts:[l,s],biggestArea:-d}:{cuts:[s,l],biggestArea:-h}}return r?{cuts:[s],biggestArea:Number.MAX_VALUE/2}:a?{cuts:[l],biggestArea:Number.MAX_VALUE/2}:{cuts:[],biggestArea:Number.MAX_VALUE}}function A(e,t){var n=y(e),i=n.bigDim,r=n.smallDim,a=y(t),o=a.bigDim,s=a.smallDim;return i>o?-1:i<o?1:r>s?-1:r<s?1:0}function y(e){return{bigDim:Math.max(e.height,e.width),smallDim:Math.min(e.height,e.width)}}var D=/[^0-9.]/g,S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).state={inputText:'Length,Width,Quantity,Material,Label,\r\n20 in,16 in,6,1/2 PLY,Side L,\r\n17.375 in,16 in,3,1/2 PLY,False Front,\r\n17.375 in,15.125 in,3,1/2 PLY,Part 4,\r\n19.875 in,17.875 in,3,1/2 PLY,Bottom,\r\n19.5 in,19.125 in,3,3/4 PLY,Front,\r\n20 in,16 in,2,1/2 PLY,Side L,\r\n25.75 in,16 in,1,1/2 PLY,False Front,\r\n25.75 in,15.125 in,1,1/2 PLY,Part 4,\r\n26.25 in,19.875 in,1,1/2 PLY,Bottom,\r\n27.5 in,19.5 in,1,3/4 PLY,Front,\r\n22 in,21.125 in,7,3/4 PLY,Side R,\r\n22 in,19.417 in,3,3/4 PLY,Bottom,\r\n20.375 in,19.417 in,3,3/4 PLY,Back,\r\n19.75 in,2.25 in,3,3/4 Poplar,FF Rail R,\r\n19.75 in,1.5 in,2,3/4 Poplar,FF Stile,\r\n19.75 in,1.5 in,2,3/4 Poplar,FF Rail L,\r\n65.75 in,24 in,1,3/4 PLY,Top Deck,\r\n65.001 in,1.5 in,1,3/4 Poplar,FF - Top,\r\n65.001 in,2.25 in,1,3/4 Poplar,FF Bottom,\r\n27.75 in,22 in,1,3/4 PLY,Bottom Big,\r\n30.25 in,21.125 in,1,3/4 PLY,Side R Big,\r\n27.75 in,20.375 in,1,3/4 PLY,Back Big,\r\n31.5 in,2.25 in,1,3/4 Poplar,FF Big Bottom,\r\n31.5 in,1.5 in,1,3/4 Poplar,FF Big Top,\r\n30.25 in,1.5 in,1,3/4 Poplar,FF Dummy Top,\r\n30.25 in,2.25 in,1,3/4 Poplar,FF Dummy Bottom,\r\n54.25 in,30.75 in,1,3/4 PLY,Top Deck L,\r\n\r\n48",96",3,3/4 PLY,3/4 PLY,true\r\n48",96",2,1/2 PLY,1/2 PLY,true\r\n96",7.25",2,3/4 Poplar,POPLAR,true\r\n52",7.25",2,3/4 Poplar,POPLAR,true\r\n48",62",1,3/4 PLY,3/4 PLY PARTIAL,true\r\n39",30",1,3/4 PLY,3/4 PLY PARTIAL2,true\r\n',job:void 0,results:void 0,kerfText:"0.25",optimizeArea:!1},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e,t=this;return Object(i.jsxs)("div",{id:"container",children:[Object(i.jsx)("h1",{children:"sheet cutter"}),Object(i.jsxs)("div",{children:[Object(i.jsx)("textarea",{value:this.state.inputText,onChange:h((function(e){return t.setState({inputText:e})}))}),Object(i.jsx)("input",{value:this.state.kerfText,onChange:h((function(e){return t.setState({kerfText:e})}))}),Object(i.jsxs)("p",{children:[Object(i.jsx)("input",{type:"checkbox",checked:this.state.optimizeArea,onChange:(e=function(e){return t.setState({optimizeArea:e})},function(t){return e(t.target.checked)})}),"optimize area?"]}),Object(i.jsx)("button",{onClick:function(){return t.handleProcessClick()},children:"process !"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"results"}),Object(i.jsx)(j,{job:this.state.job,result:this.state.results})]})]})}},{key:"handleProcessClick",value:function(){var e=function(e){O=1;var t,n=e.split("\n"),i={availablePanels:[],neededPanels:[],settings:{bladeKerf:.25,optimizeArea:!1}},r=!0,a=Object(m.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(r)r=!1;else if(""!==o.trim()){var s=o.split(","),l=+s[0].replaceAll(D,""),c=+s[1].replaceAll(D,""),u=+s[2],d=s[3],h=s[4],p="true"===s[5].trim().toLowerCase();if(l>c){var f=[c,l];l=f[0],c=f[1]}for(var g=1;g<=u;g++){var b={height:l,width:c,id:O++,material:d,label:u>1?h+"-"+g:h};p?i.availablePanels.push(b):i.neededPanels.push(b)}}}}catch(v){a.e(v)}finally{a.f()}return i}(this.state.inputText);e.settings.bladeKerf=+this.state.kerfText,e.settings.optimizeArea=this.state.optimizeArea,console.log("job start",e);var t=x(e);console.log("result",t),this.setState({job:e,results:t})}}]),n}(a.a.Component),F=(n(20),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))});s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(S,{})}),document.getElementById("root")),F()}},[[21,1,2]]]);
//# sourceMappingURL=main.678e4d1b.chunk.js.map